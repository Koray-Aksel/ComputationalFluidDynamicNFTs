{"ast":null,"code":"// constants\nimport Web3EthContract from \"web3-eth-contract\";\nimport Web3 from \"web3\"; // log\n\nimport { fetchData } from \"../data/dataActions\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport WalletLink from \"walletlink\";\nconst [walletlinkProvider, setWalletlinkProvider] = React.useState();\n\nconst connectRequest = () => {\n  return {\n    type: \"CONNECTION_REQUEST\"\n  };\n};\n\nconst connectSuccess = payload => {\n  return {\n    type: \"CONNECTION_SUCCESS\",\n    payload: payload\n  };\n};\n\nconst connectFailed = payload => {\n  return {\n    type: \"CONNECTION_FAILED\",\n    payload: payload\n  };\n};\n\nconst updateAccountRequest = payload => {\n  return {\n    type: \"UPDATE_ACCOUNT\",\n    payload: payload\n  };\n};\n\nexport const connect = () => {\n  return async dispatch => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const CONFIG = await configResponse.json();\n    const {\n      ethereum\n    } = window;\n    const metamaskIsInstalled = ethereum && ethereum.isMetaMask;\n\n    if (metamaskIsInstalled) {\n      Web3EthContract.setProvider(ethereum);\n      let web3 = new Web3(ethereum);\n\n      try {\n        const accounts = await ethereum.request({\n          method: \"eth_requestAccounts\"\n        });\n        const networkId = await ethereum.request({\n          method: \"net_version\"\n        });\n\n        if (networkId == CONFIG.NETWORK.ID) {\n          const SmartContractObj = new Web3EthContract(abi, CONFIG.CONTRACT_ADDRESS);\n          dispatch(connectSuccess({\n            account: accounts[0],\n            smartContract: SmartContractObj,\n            web3: web3\n          })); // Add listeners start\n\n          ethereum.on(\"accountsChanged\", accounts => {\n            dispatch(updateAccount(accounts[0]));\n          });\n          ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          }); // Add listeners end\n        } else {\n          dispatch(connectFailed(`Change network to ${CONFIG.NETWORK.NAME}.`));\n        }\n      } catch (err) {\n        dispatch(connectFailed(\"Something went wrong.\"));\n      }\n    } else {\n      dispatch(connectFailed(\"Install Metamask, or click the Connect Coinbase Wallet Button.\"));\n    }\n  };\n};\nexport const connectCoinbase = () => {\n  return async dispatch => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const CONFIG = await configResponse.json();\n    const {\n      ethereum\n    } = window;\n\n    try {\n      // Initialize Walletlink\n      const walletLink = new WalletLink({\n        appName: 'demo-app',\n        darkMode: true\n      });\n      const provider = walletLink.makeWeb3Provider('https://rinkeby.infura.io/v3/55d040fb60064deaa7acc8e320d99bd4', 4);\n      setWalletlinkProvider(provider);\n      const accounts = await provider.request({\n        method: 'eth_requestAccounts'\n      });\n      const SmartContractObj = new Web3EthContract(abi, CONFIG.CONTRACT_ADDRESS);\n      dispatch(connectSuccess({\n        account: accounts[0],\n        smartContract: SmartContractObj,\n        web3: web3\n      }));\n    } catch (err) {\n      dispatch(connectFailed(\"Something went wrong.\"));\n    }\n\n    const metamaskIsInstalled = ethereum && ethereum.isMetaMask;\n\n    if (metamaskIsInstalled) {\n      Web3EthContract.setProvider(ethereum);\n      let web3 = new Web3(ethereum);\n\n      try {\n        const accounts = await ethereum.request({\n          method: \"eth_requestAccounts\"\n        });\n        const networkId = await ethereum.request({\n          method: \"net_version\"\n        });\n\n        if (networkId == CONFIG.NETWORK.ID) {\n          const SmartContractObj = new Web3EthContract(abi, CONFIG.CONTRACT_ADDRESS);\n          dispatch(connectSuccess({\n            account: accounts[0],\n            smartContract: SmartContractObj,\n            web3: web3\n          })); // Add listeners start\n\n          ethereum.on(\"accountsChanged\", accounts => {\n            dispatch(updateAccount(accounts[0]));\n          });\n          ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          }); // Add listeners end\n        } else {\n          dispatch(connectFailed(`Change network to ${CONFIG.NETWORK.NAME}.`));\n        }\n      } catch (err) {\n        dispatch(connectFailed(\"Something went wrong.\"));\n      }\n    } else {\n      dispatch(connectFailed(\"Install Metamask, or click the Connect Coinbase Wallet Button.\"));\n    }\n  };\n};\n/*\nexport const connectCoinbase() => {\n  return true;\n  return async (dispatch) => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const CONFIG = await configResponse.json();\n    const { ethereum } window;\n    try {\n      // Initialize Walletlink\n      const walletLink = new WalletLink({\n        appName: 'demo-app',\n        darkMode: true\n      });\n\n      const provider = walletLink.makeWeb3Provider('https://rinkeby.infura.io/v3/55d040fb60064deaa7acc8e320d99bd4', 4);\n      setWalletlinkProvider(provider);\n      const accounts = await provider.request({\n        method: 'eth_requestAccounts'\n      });\n      const SmartContractObj = new Web3EthContract(\n        abi, \n        CONFIG.CONTRACT_ADDRESS\n      );\n      dispatch(\n        connectSuccess({\n          account: accounts[0],\n          smartContract: SmartContractObj,\n          web3: web3,\n        })\n      );\n    } catch (err) {\n      dispatch(connectFailed(\"Something went wrong.\"));\n    }\n  };\n};\n*/\n\nexport const updateAccount = account => {\n  return async dispatch => {\n    dispatch(updateAccountRequest({\n      account: account\n    }));\n    dispatch(fetchData(account));\n  };\n};","map":{"version":3,"sources":["/Users/redx/Documents/Desktop/NFTs/ComputationalFluidDynamicNFTs/V2.0.1/cfd_nft_minting_dapp/src/redux/blockchain/blockchainActions.js"],"names":["Web3EthContract","Web3","fetchData","Web3Provider","WalletLink","walletlinkProvider","setWalletlinkProvider","React","useState","connectRequest","type","connectSuccess","payload","connectFailed","updateAccountRequest","connect","dispatch","abiResponse","fetch","headers","Accept","abi","json","configResponse","CONFIG","ethereum","window","metamaskIsInstalled","isMetaMask","setProvider","web3","accounts","request","method","networkId","NETWORK","ID","SmartContractObj","CONTRACT_ADDRESS","account","smartContract","on","updateAccount","location","reload","NAME","err","connectCoinbase","walletLink","appName","darkMode","provider","makeWeb3Provider"],"mappings":"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","sourcesContent":["// constants\nimport Web3EthContract from \"web3-eth-contract\";\nimport Web3 from \"web3\";\n// log\nimport { fetchData } from \"../data/dataActions\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport WalletLink from \"walletlink\";\n\nconst [ walletlinkProvider, setWalletlinkProvider ] = React.useState();\n\nconst connectRequest = () => {\n  return {\n    type: \"CONNECTION_REQUEST\",\n  };\n};\n\nconst connectSuccess = (payload) => {\n  return {\n    type: \"CONNECTION_SUCCESS\",\n    payload: payload,\n  };\n};\n\nconst connectFailed = (payload) => {\n  return {\n    type: \"CONNECTION_FAILED\",\n    payload: payload,\n  };\n};\n\nconst updateAccountRequest = (payload) => {\n  return {\n    type: \"UPDATE_ACCOUNT\",\n    payload: payload,\n  };\n};\n\nexport const connect = () => {\n  return async (dispatch) => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const CONFIG = await configResponse.json();\n    const { ethereum } = window;\n    const metamaskIsInstalled = ethereum && ethereum.isMetaMask;\n    if (metamaskIsInstalled) {\n      Web3EthContract.setProvider(ethereum);\n      let web3 = new Web3(ethereum);\n      try {\n        const accounts = await ethereum.request({\n          method: \"eth_requestAccounts\",\n        });\n        const networkId = await ethereum.request({\n          method: \"net_version\",\n        });\n        if (networkId == CONFIG.NETWORK.ID) {\n          const SmartContractObj = new Web3EthContract(\n            abi,\n            CONFIG.CONTRACT_ADDRESS\n          );\n          dispatch(\n            connectSuccess({\n              account: accounts[0],\n              smartContract: SmartContractObj,\n              web3: web3,\n            })\n          );\n          // Add listeners start\n          ethereum.on(\"accountsChanged\", (accounts) => {\n            dispatch(updateAccount(accounts[0]));\n          });\n          ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          });\n          // Add listeners end\n        } else {\n          dispatch(connectFailed(`Change network to ${CONFIG.NETWORK.NAME}.`));\n        }\n      } catch (err) {\n        dispatch(connectFailed(\"Something went wrong.\"));\n      }\n    } else {\n      dispatch(connectFailed(\"Install Metamask, or click the Connect Coinbase Wallet Button.\"));\n    }\n  };\n};\n\nexport const connectCoinbase = () => {\n  return async (dispatch) => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const CONFIG = await configResponse.json();\n    const { ethereum } = window;\n    try {\n      // Initialize Walletlink\n      const walletLink = new WalletLink({\n        appName: 'demo-app',\n        darkMode: true\n      });\n\n      const provider = walletLink.makeWeb3Provider('https://rinkeby.infura.io/v3/55d040fb60064deaa7acc8e320d99bd4', 4);\n      setWalletlinkProvider(provider);\n      const accounts = await provider.request({\n        method: 'eth_requestAccounts'\n      });\n\n      const SmartContractObj = new Web3EthContract(\n        abi, \n        CONFIG.CONTRACT_ADDRESS\n      );\n      dispatch(\n        connectSuccess({\n          account: accounts[0],\n          smartContract: SmartContractObj,\n          web3: web3,\n        })\n      );\n\n      } catch (err) {\n        dispatch(connectFailed(\"Something went wrong.\"));\n      }\n    const metamaskIsInstalled = ethereum && ethereum.isMetaMask;\n    if (metamaskIsInstalled) {\n      Web3EthContract.setProvider(ethereum);\n      let web3 = new Web3(ethereum);\n      try {\n        const accounts = await ethereum.request({\n          method: \"eth_requestAccounts\",\n        });\n        const networkId = await ethereum.request({\n          method: \"net_version\",\n        });\n        if (networkId == CONFIG.NETWORK.ID) {\n          const SmartContractObj = new Web3EthContract(\n            abi,\n            CONFIG.CONTRACT_ADDRESS\n          );\n          dispatch(\n            connectSuccess({\n              account: accounts[0],\n              smartContract: SmartContractObj,\n              web3: web3,\n            })\n          );\n          // Add listeners start\n          ethereum.on(\"accountsChanged\", (accounts) => {\n            dispatch(updateAccount(accounts[0]));\n          });\n          ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          });\n          // Add listeners end\n        } else {\n          dispatch(connectFailed(`Change network to ${CONFIG.NETWORK.NAME}.`));\n        }\n      } catch (err) {\n        dispatch(connectFailed(\"Something went wrong.\"));\n      }\n    } else {\n      dispatch(connectFailed(\"Install Metamask, or click the Connect Coinbase Wallet Button.\"));\n    }\n  };\n};\n\n/*\nexport const connectCoinbase() => {\n  return true;\n  return async (dispatch) => {\n    dispatch(connectRequest());\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const CONFIG = await configResponse.json();\n    const { ethereum } window;\n    try {\n      // Initialize Walletlink\n      const walletLink = new WalletLink({\n        appName: 'demo-app',\n        darkMode: true\n      });\n\n      const provider = walletLink.makeWeb3Provider('https://rinkeby.infura.io/v3/55d040fb60064deaa7acc8e320d99bd4', 4);\n      setWalletlinkProvider(provider);\n      const accounts = await provider.request({\n        method: 'eth_requestAccounts'\n      });\n      const SmartContractObj = new Web3EthContract(\n        abi, \n        CONFIG.CONTRACT_ADDRESS\n      );\n      dispatch(\n        connectSuccess({\n          account: accounts[0],\n          smartContract: SmartContractObj,\n          web3: web3,\n        })\n      );\n    } catch (err) {\n      dispatch(connectFailed(\"Something went wrong.\"));\n    }\n  };\n};\n*/\n\nexport const updateAccount = (account) => {\n  return async (dispatch) => {\n    dispatch(updateAccountRequest({ account: account }));\n    dispatch(fetchData(account));\n  };\n};\n"]},"metadata":{},"sourceType":"module"}